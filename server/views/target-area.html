{% extends 'layout.html' %}

{% from "table/macro.njk" import govukTable %}
{% from "macros/tabs.html" import tabs %}

{% set bodyClasses = "internal" %}

{% block body %}
  <div class="govuk-body">
    <div class="govuk-inset-text">
      Generated on 
      <time id="page-time">{{meta.longDateString}}</time>
    </div>
    <div class="govuk-tabs">
      {{tabs('target-area')}}
    
      <section class="govuk-tabs__panel">
        <span style="float: right">
          <a href="/target-area" class="govuk-link">Search target areas</a>
        </span>
        <span class="govuk-caption-xl">{{targetArea.eaAreaName}}</span>
        <h2 class="govuk-heading-l">{{targetArea.label}} ({{targetArea.fwdCode}})</h2>

        <h2 class="govuk-heading-s">Current Warning</h2>
        {% if warningTable %}
        {{govukTable(warningTable)}}
          {% if allowEdit %}
            <a class="govuk-button" href="/target-area/{{targetArea.fwdCode}}/edit">Edit the current warning</a>
          {% endif %}
        {% else %}
        <p>There are no warnings currently in force for {{targetArea.label}}</p>
          {% if allowEdit %}
            <a class="govuk-button" href="/target-area/{{targetArea.fwdCode}}/edit">Create a new warning</a>
          {% endif %}
        {% endif %}

        <h2 class="govuk-heading-s">Historic Warnings</h2>
        {% if historicWarningsTable %}
        {{govukTable(historicWarningsTable)}}
        {% else %}
        <p>No historic messages available for {{targetArea.label}}</p>
        {% endif %}
      </section>
    </div>
  </div>
{% endblock %}